<%- include ../public/header.ejs%>

<div class="container-fluid">
  <div class="row">
    <div class="col-sm-2">

      <%- include ../public/aslideleft.ejs%>

    </div>
    <div class="col-sm-10">
      <ol class="breadcrumb">
        <li class="active">订单管理
        </li>
        <li class="active">订单列表
        </li>
      </ol>
      <div class="panel panel-default">
        <div class="panel-heading">
          搜索
        </div>
        <div class="panel-body">
          <form role="form" class="form-inline">
            <div class="form-group">
              <label for="name">名称</label>
              <input type="text" class="form-control" id="name" placeholder="请输入名称">
            </div>

            <div class="form-group">
              <button type="submit" class="btn btn-default">开始搜索</button>
            </div>
          </form>
        </div>
      </div>
      <!--
                列表展示
            -->
      <div class="table-responsive">
        <table class="table table-striped" id="receiptId">
          <thead>
            <tr>
              <th>用户号</th>
              <th>商品号</th>
              <th>用户名</th>
              <th>菜品名</th>
              <th>下单时间</th>
              <th>状态</th>
              <th>数量</th>
              <th>总价格</th>
              <th class="text-center">操作</th>
            </tr>
          </thead>
          <tbody>
            <% for(var i=0;i<list.length;i++){ %>
            <% if(list[i].state == 'pending'){ %>
            <!-- pending -->
            <tr>
              <td><%=list[i].user_account%></td>
              <td><%=list[i].goods_id%></td>
              <td><%=list[i].user_name%></td>
              <td><%=list[i].goods_name%></td>
              <td><%=list[i].time%></td>
              <td><%=list[i].state%></td>
              <td><%=list[i].count%></td>
              <td><%=list[i].goodsTotalPrice%></td>
              <td class="text-center">
                <a href="javascript:void(0);" class="btn btn-success" id="aReceiptId">
                  <p style="display: none;"><%=list[i].ID%></p>
                  接单
                </a>
              </td>
            </tr>
            <% } %>
            <% } %>
            <% for(var i=0;i<list.length;i++){ %>
            <% if(list[i].state == 'waiting'){ %>
            <!-- waiting -->
            <tr>
              <td><%=list[i].user_account%></td>
              <td><%=list[i].goods_id%></td>
              <td><%=list[i].user_name%></td>
              <td><%=list[i].goods_name%></td>
              <td><%=list[i].time%></td>
              <td><%=list[i].state%></td>
              <td><%=list[i].count%></td>
              <td><%=list[i].goodsTotalPrice%></td>
              <td class="text-center">
                <a href="javascript:void(0);" class="btn btn-success disabled" id="aReceiptId" style="float: left;">
                  <p style="display: none;"><%=list[i].ID%></p>
                  已接单
                </a>
                <a href="javascript:void(0);" class="btn btn-success" id="aFinishOrder" style="float: left;">
                  <p style="display: none;"><%=list[i].ID%></p>
                  完成
                </a>
              </td>
            </tr>
            <% } %>
            <% } %>
            <% for(var i=0;i<list.length;i++){ %>
              <% if(list[i].state == 'finished'){ %>
              <!-- finished -->
              <tr>
                <td><%=list[i].user_account%></td>
                <td><%=list[i].goods_id%></td>
                <td><%=list[i].user_name%></td>
                <td><%=list[i].goods_name%></td>
                <td><%=list[i].time%></td>
                <td><%=list[i].state%></td>
                <td><%=list[i].count%></td>
                <td><%=list[i].goodsTotalPrice%></td>
                <td class="text-center">
                  <a href="javascript:void(0);" class="btn btn-success disabled" id="aReceiptId" style="float: left;">
                    <p style="display: none;"><%=list[i].ID%></p>
                    已完成
                  </a>
                </td>
              </tr>
              <% } %>
              <% } %>
          </tbody>
        </table>
        <nav aria-label="Page navigation">

        </nav>
      </div>

    </div>
  </div>
</div>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="/public/js/ws.js"></script>
<script src="/public/js/order.js"></script>
</body>

</html>
